!function(w,d){"use strict";const SECONDS=30;let star,starBtn,getMainDiv,getQuestio,transwer,score=0,getMessage,que=0,stat,seco,seconds=30,tim=0,imag;const URL="https://opentdb.com/api.php?amount=50",fetchData=async()=>{try{const response=await window.fetch(URL),json=await response.json();return json}catch(error){console.log(`An error occurred.${error}`)}};let questions;(async()=>{const data=await fetchData();questions=data.results,loaded()})();const stufload=()=>{const loader=d.getElementById("loader");for(let i=0;i<=100;i++)!function(ind){setTimeout((function(){loader.childNodes[2].nodeValue=ind+"%"}),100+10*ind)}(i)};d.addEventListener("DOMContentLoaded",()=>{stufload()});const decodeEntities=function(){const element=document.createElement("div");function decodeHTMLEntities(str){return str&&"string"==typeof str&&(str=(str=str.replace(/<script[^>]*>([\S\s]*?)<\/script>/gim,"")).replace(/<\/?\w(?:[^"'>]|"[^"]*"|'[^']*')*>/gim,""),element.innerHTML=str,str=element.textContent,element.textContent=""),str}return decodeHTMLEntities}();function CreateElem(e,className,id,text,src){return this instanceof CreateElem?(e=document.createElement(e),id&&(e.id=id),className&&(e.className=className),text&&(e.innerText=text),src&&(e.src=src,e.setAttribute("alt","img")),e):new CreateElem(e,className,id)}function remElements(elementId){const element=document.getElementById(elementId);if(element)if(element.children.length)for(;element.firstChild;)element.removeChild(element.firstChild);else element.parentNode.removeChild(element)}function loaded(){if(getMainDiv=document.getElementById("main"),getQuestio=document.getElementById("ques"),getMessage=document.getElementById("mess"),starBtn=document.getElementById("starBtn"),star=document.getElementById("star"),stat=document.getElementById("stat"),seco=document.getElementById("seco"),imag=document.getElementById("imag"),getMainDiv.addEventListener("mouseup",loopElems),d.getElementById("loader").style.display="none",starBtn.innerHTML="start",!w.localStorage.wZfZrT2N14M6NdG9bbrI){const el=document.createElement("p"),di=document.createElement("div");el.innerHTML='This game is using <a href="https://en.wikipedia.org/wiki/Web_storage#Local_and_session_storage" target="_blank" rel="noopener noreferrer">localStorage</a>. By playing you agree to store data in localStorage',di.appendChild(el),starBtn.parentNode.insertBefore(di,starBtn.nextSibling)}starBtn.addEventListener("click",start),[que,score]=[Number(readValue()[0]),Number(readValue()[1])],que>0&&(starBtn.innerText="continue")}function getRandomIntInclusive(min,max){return min=Math.ceil(min),max=Math.floor(max),Math.floor(Math.random()*(max-min+1)+min)}function addQuestions(ques){que===questions.length&&(que=0);const{category:category,incorrect_answers:incorrect_answers,correct_answer:correct_answer,question:question}=questions[ques];imag.innerText=category;const ins=getRandomIntInclusive(0,incorrect_answers.length);transwer="id"+ins,incorrect_answers.splice(ins,0,[correct_answer]);const qu=new CreateElem("div","q","q",decodeEntities(question)),lenthOfRes=incorrect_answers.length,ans=[];for(let i=0;i<lenthOfRes;i++)ans.push(new CreateElem("button","btn tips trans","id"+i,decodeEntities(incorrect_answers[i])));ans.map(el=>getMainDiv.appendChild(el)),getQuestio.appendChild(qu)}function show(){const elems=[...document.getElementsByClassName("tips")];for(let i=elems.length-1;i>=0;i--)elems[i].classList.toggle("trans")}function updateStat(){const va=que;stat.innerText=va+1+"/"+questions.length}function start(){addQuestions(que),setTimeout(show,500),hide.call(getMessage),countdown(),updateStat()}function loopElems(elem){if(!elem.target.classList.contains("tips"))return!1;clearTimeout(tim),sele.call(elem.target);const getAllansw=[...document.getElementsByClassName("tips")];getAllansw.forEach(element=>{element.id!==transwer?nno.call(element):yyes.call(element),element.disabled=!0,element.style.pointerEvents="none"});const elems=document.getElementById("id"+que);elem.target.id===transwer?(sele.bind(elems),yyes.call(getQuestio),score++):(nno.call(getQuestio),nno.bind(elems),w.navigator.vibrate(30)),nextQuest()}function nextQuest(){que++,seconds=30,createItem(que,score),setTimeout(()=>{show(),setTimeout(()=>{remElements("img"),remElements("q"),remElements("main"),getQuestio.className="bg",que===questions.length&&(que=0,star.innerText="Your score: "+score+"/"+questions.length,questions.length===score?(star.innerText+="\nvictory",starBtn.innerText="Repeat"):starBtn.innerText="Improve",getMessage.classList.remove("hide"),score=0,createItem(que,score)),que>0&&start()},0)},1500)}function hide(){void 0!==this&&this.classList.add("hide")}function sele(){void 0!==this&&this.classList.add("sele")}function yyes(){void 0!==this&&this.classList.add("yyes")}function nno(){void 0!==this&&this.classList.add("nno")}function countdown(){seco.innerText=seconds,--seconds>0?tim=setTimeout(()=>{countdown()},1e3):(nextQuest(),clearTimeout(tim))}function createItem(q,s){storageAvailable("localStorage")?(w.localStorage.setItem("wZfZrT2N14M6NdG9bbrI",q),w.localStorage.setItem("d2SemiF4K6jUP1rrLI9j",s)):console.log("No localstorage")}function readValue(){if(storageAvailable("localStorage")){const x=w.localStorage.getItem("wZfZrT2N14M6NdG9bbrI"),a=w.localStorage.getItem("d2SemiF4K6jUP1rrLI9j");return[x,a]}console.log("No localstorage")}function storageAvailable(type){try{const storage=w[type],x="__storage_test__";return storage.setItem(x,x),storage.removeItem(x),!0}catch(e){return!1}}}(window,document);